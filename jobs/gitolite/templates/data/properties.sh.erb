#!/usr/bin/env bash

# job template binding variables

# job name & index of this VM within cluster
# e.g. JOB_NAME=redis, JOB_INDEX=0
export NAME='<%= name %>'
export JOB_INDEX=<%= index %>
# full job name, like redis/0 or webapp/3
export JOB_FULL="$NAME/$JOB_INDEX"

# the package that contains the application code
export WEBAPP_PACKAGE='<%= (properties.webapp && properties.webapp.package) || 'gitolite' %>' 
export WEBAPP_DIR=/var/vcap/packages/$WEBAPP_PACKAGE

export WEBAPP_APPSTACK='<%= properties.webapp && properties.webapp.appstack %>'

export ADMIN_USER_PUB_KEY='<%= properties.admin.admin_pub_key %>'
export ADMIN_USER_PRIV_KEY='<%= properties.admin.admin_priv_key %>'

export GIT_LOGIN='<%= (properties.git && properties.git.login) || 'git' %>'
export GIT_USER='<%= (properties.git && properties.git.login) || 'git' %>'
export GIT_USER_GRP=${GIT_USER}:vcap
export GIT_PASSWORD="<%= (properties.git && properties.git.password) || '${GIT_USER}' %>"
export GIT_HOME="/home/${GIT_USER}"
export ADMIN_PUB_KEY='<%= properties.admin.admin_pub_key %>'
